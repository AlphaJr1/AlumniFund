# **PROMPT 1: FOUNDATION - PROJECT SETUP & PUBLIC DASHBOARD**

```markdown
# DOMPET ALUMNI - PHASE 1: PROJECT FOUNDATION & PUBLIC DASHBOARD

## PROJECT CONTEXT

I'm building a financial transparency dashboard for my high school alumni community fund. This is a web-based system to collect and manage graduation celebration funds for 25 members who are graduating from university over the coming months.

### Core Purpose
- Transparent fund management for graduation celebrations
- Target-based fundraising (Rp 250,000 per graduate)
- Monthly targets with automatic deadline management
- Public viewing for all members (no login), admin-only editing

### Key Principles
1. **Equality**: No earmarked donations - all contributions go to monthly pool
2. **Transparency**: Every transaction visible with proof
3. **Simplicity**: Minimal complexity, focus on functionality
4. **Trust**: Mandatory proof for all income/expense

---

## TECH STACK

**Frontend**: Flutter Web
**Backend**: Firebase (Firestore + Authentication + Storage + Hosting)
**State Management**: Riverpod
**UI**: Material Design 3
**Deployment**: Firebase Hosting (target domain: canopya.cloud)

---

## BUSINESS LOGIC & SYSTEM RULES

### 1. TARGET WISUDA (GRADUATION TARGET) SYSTEM

#### Target Calculation
```
target_amount = number_of_graduates_in_month Ã— Rp 250,000
```

**Example:**
- May 2026: Faris (May 1), Daffa (May 8), Gasin (May 21)
- Target = 3 Ã— Rp 250,000 = Rp 750,000

#### Deadline Calculation
```
deadline = earliest_graduation_date_in_month - 3 days
deadline_time = 23:59:59 on deadline date
```

**Example:**
- Faris graduates May 1 â†’ Deadline: April 28 at 23:59
- All contributions for May target must arrive before April 28, 23:59

#### Target Lifecycle States

**STATE 1: UPCOMING**
- Condition: Target created but not yet active
- Display: "ğŸ”’ Coming Soon - [Month Year]"
- Behavior: Does NOT accept contributions

**STATE 2: ACTIVE**
- Trigger: Auto-opens when previous target reaches deadline
- Display: Active progress bar, countdown, graduate details
- Behavior: Accepts contributions for this target
- Income routing: All income goes to this target

**STATE 3: CLOSING_SOON** (sub-state of ACTIVE)
- Trigger: H-7 (7 days before) until H-3 (3 days before) first graduation
- Display: Warning badge "âš ï¸ Deadline in [X] days"
- Behavior: Still accepts contributions, shows urgency indicator
- Visual: Orange/red warning colors

**STATE 4: CLOSED**
- Trigger: Automatically at deadline datetime (23:59 on deadline date)
- Display: "âœ… Fully Funded" OR "âš ï¸ Partially Funded"
- Behavior: 
  * NO longer accepts contributions for this target
  * Funds automatically distributed
  * Target moves to archive section
  * Next target (if exists) automatically becomes ACTIVE

**Distribution Formula (auto-execute when CLOSED):**
```javascript
if (collected_amount >= target_amount) {
  per_person = Rp 250,000
  excess = collected_amount - target_amount
  // Transfer excess to General Fund
  status_display = "âœ… FULLY FUNDED - Rp 250K/person"
} else {
  per_person = collected_amount Ã· number_of_graduates
  status_display = "âš ï¸ PARTIALLY FUNDED - Rp [per_person]/person"
}
```

**STATE 5: ARCHIVED**
- Trigger: After last graduation in that month completes
- Display: Collapsed card in "Past Targets" section
- Behavior: Read-only, expandable for details

#### Target Auto-Open Logic
```javascript
WHEN current_target.status BECOMES "CLOSED" THEN
  IF next_target EXISTS AND next_target.status == "UPCOMING" THEN
    next_target.status = "ACTIVE"
    next_target.open_date = CURRENT_TIMESTAMP
    
    // Auto-transfer General Fund to new active target
    IF general_fund.balance > 0 THEN
      next_target.current_amount += general_fund.balance
      general_fund.balance = 0
      CREATE_TRANSACTION(
        type: "income",
        target_id: next_target.id,
        amount: general_fund.balance,
        description: "Transfer dari Dompet Bersama"
      )
    END IF
  END IF
END WHEN
```

---

### 2. GENERAL FUND (DOMPET BERSAMA) SYSTEM

#### Purpose
Flexible fund pool for:
- Excess from fully-funded targets
- Post-deadline contributions (when no active target)
- Community expenses (gatherings, reunions, merchandise)
- Manual allocation by admin (top-up for shortfall targets)

#### Income Sources to General Fund

**Source 1: Excess from Fully Funded Target**
```javascript
WHEN target.status BECOMES "CLOSED" AND target.collected >= target.amount THEN
  excess = target.collected - target.amount
  general_fund.balance += excess
  CREATE_TRANSACTION(
    type: "income",
    target_id: "general_fund",
    amount: excess,
    description: "Kelebihan dari target [month year]"
  )
END WHEN
```

**Source 2: Post-Deadline Contributions**
```javascript
WHEN new_income_received AND no_active_target_exists THEN
  general_fund.balance += income.amount
  income.target_id = "general_fund"
END WHEN
```

**Example Flow:**
1. May target CLOSED with Rp 800K collected (target Rp 750K)
   - Rp 750K distributed (Rp 250K Ã— 3 graduates)
   - Rp 50K transferred to General Fund
2. Someone contributes Rp 75K on April 29 (after May deadline)
   - Goes to General Fund â†’ Balance becomes Rp 125K
3. June target becomes ACTIVE on April 29 00:00
   - Rp 125K from General Fund auto-transfers to June target
   - General Fund balance returns to Rp 0
   - June target starting amount = Rp 125K

---

### 3. TRANSACTION SYSTEM

#### Income (Pemasukkan) Flow

**User Journey:**
1. Member transfers to community bank account
2. Member uploads proof via web dashboard OR sends via WhatsApp to admin
3. Admin validates and inputs into system:
   - Amount
   - Timestamp (actual transfer time, not input time)
   - Proof image URL
4. System auto-assigns to:
   - Active target (if exists)
   - General Fund (if no active target)

**Validation Rules:**
- Proof image: MANDATORY (max 5MB, .jpg/.jpeg/.png only)
- Amount minimum: Rp 10,000 (configurable)
- Timestamp: Cannot be future date
- Duplicate detection: Flag if same amount + timestamp within 5 minutes

#### Expense (Pengeluaran) Flow

**Categories:**
1. **Wisuda** (Graduation): Flowers, backdrop, gown rental, documentation
2. **Community**: Gatherings, reunions, merchandise
3. **Operational**: Admin fees (if any), platform costs
4. **Others**: Flexible category

**Admin Input Flow:**
1. Admin enters expense:
   - Amount
   - Category (dropdown)
   - Description (min 10 characters)
   - Proof image (struk/receipt - MANDATORY)
   - Timestamp (default: now, adjustable)
2. System deducts from General Fund balance
3. Displays on dashboard with full details

**Hard Rules:**
- Proof image: MANDATORY
- Cannot exceed General Fund balance (hard validation)
- Description minimum: 10 characters

---

## DATABASE SCHEMA (FIRESTORE)

### Collection: /graduation_targets

```javascript
Document Structure:
{
  id: string,                    // Auto-generated or custom (e.g., "mei_2026")
  month: string,                 // Lowercase: "januari", "februari", "mei", etc.
  year: number,                  // 2026
  graduates: [                   // Array of graduate objects
    {
      name: string,              // "Faris Ramadhan"
      date: Timestamp,           // ISO 8601 graduation date
      location: string           // "Universitas Indonesia, Depok"
    },
    // ... more graduates
  ],
  target_amount: number,         // 750000 (calculated: graduates.length Ã— 250000)
  current_amount: number,        // 520000 (sum of all contributions)
  deadline: Timestamp,           // ISO 8601 - "2026-04-28T23:59:59"
  status: string,                // "upcoming" | "active" | "closing_soon" | "closed" | "archived"
  open_date: Timestamp,          // When target became active
  closed_date: Timestamp,        // When deadline reached (null if not closed)
  distribution: {
    per_person: number,          // 250000 or calculated if partial
    total_distributed: number,   // 750000 total amount distributed
    status: string,              // "pending" | "distributed"
    distributed_at: Timestamp    // When distribution occurred
  },
  created_at: Timestamp,
  created_by: string,            // Admin email
  updated_at: Timestamp
}

Indexes Required:
- status (ASC)
- deadline (ASC)
- Composite: status (ASC), deadline (ASC)
```

### Collection: /transactions

```javascript
Document Structure:
{
  id: string,                    // Auto-generated
  type: string,                  // "income" | "expense"
  amount: number,                // 50000
  target_id: string,             // "mei_2026" | "general_fund" | null
  target_month: string,          // "mei 2026" (for display purposes)
  category: string,              // For expense: "wisuda" | "community" | "operational" | "others"
  description: string,           // "Bunga wisuda - Faris" or "Transfer dari member"
  proof_url: string,             // Firebase Storage URL
  validated: boolean,            // true (for approved income), always true for expense
  validation_status: string,     // "pending" | "approved" | "rejected" (income only)
  created_at: Timestamp,         // Actual transaction time
  input_at: Timestamp,           // When admin input to system
  created_by: string,            // Admin email
  metadata: {
    submitted_by: string,        // If from web form submission
    submission_method: string,   // "web" | "whatsapp" | "admin_direct"
    ip_address: string           // Optional, for fraud detection
  }
}

Indexes Required:
- type (ASC), created_at (DESC)
- target_id (ASC), created_at (DESC)
- validation_status (ASC) for pending items
```

### Collection: /general_fund

```javascript
Document ID: "current" (single document)

Structure:
{
  balance: number,               // 120000 (current available balance)
  last_updated: Timestamp,
  last_transaction_id: string,   // Reference to last transaction
  total_income: number,          // Cumulative all-time income
  total_expense: number,         // Cumulative all-time expense
  transaction_count: number
}

Subcollection: /general_fund/current/history
// Stores all general fund movement details
{
  amount: number,
  type: string,                  // "in" | "out"
  reason: string,                // Description of movement
  related_target_id: string,     // If related to a target
  timestamp: Timestamp
}
```

### Collection: /settings

```javascript
Document ID: "app_config" (single document)

Structure:
{
  payment_info: {
    bank_name: string,           // "BCA"
    account_number: string,      // "1234567890"
    account_name: string,        // "Adrian Marcell"
    qr_code_url: string          // Firebase Storage URL for QRIS
  },
  system_config: {
    per_person_allocation: number,    // 250000 (default)
    deadline_offset_days: number,     // 3 (H-3)
    minimum_contribution: number,     // 10000
    auto_open_next_target: boolean    // true
  },
  admin_config: {
    whatsapp_number: string,     // "+628123456789" (with country code)
    admin_email: string          // "admin@example.com"
  },
  updated_at: Timestamp,
  updated_by: string             // Admin email
}
```

### Collection: /pending_submissions

```javascript
// For web-uploaded proof images awaiting admin validation

Document Structure:
{
  id: string,                    // Auto-generated
  proof_url: string,             // Temporary Firebase Storage URL
  submitted_amount: number,      // Optional, user-entered amount
  submitted_at: Timestamp,
  status: string,                // "pending" | "approved" | "rejected"
  reviewed_at: Timestamp,        // When admin acts on it
  reviewed_by: string,           // Admin email
  notes: string                  // Rejection reason if rejected
}

Indexes Required:
- status (ASC), submitted_at (DESC)
```

---

## UI LAYOUT SPECIFICATION - PUBLIC DASHBOARD

### Overall Page Structure

**Viewport Hierarchy (Top to Bottom):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HEADER (Fixed)                                   â”‚ â† Always visible at top
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ GENERAL FUND CARD                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ACTIVE TARGET CARD (Primary)                     â”‚ â† Main focus
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ UPCOMING TARGET SECTION (if exists)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ INCOME HISTORY SECTION                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ EXPENSE HISTORY SECTION                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ FOOTER                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### COMPONENT 1: HEADER

**Position**: Fixed at top of viewport, full width
**Height**: 60px
**Background**: Linear gradient (teal #14b8a6 to darker teal #0d9488)
**Z-index**: 1000 (always on top)

**Content Layout (Horizontal flexbox, space-between):**

```
Left side:
  - Icon: "ğŸ“" (24px)
  - Spacing: 8px
  - Text: "DOMPET ALUMNI COMM"
    * Font: Bold, 18px
    * Color: White

Right side:
  - Button: Admin access
    * Icon only: ğŸ”‘ or ğŸ‘¤ (24px)
    * Color: White
    * Hover: Slight opacity change
    * Click: Navigate to /admin/login
```

---

### COMPONENT 2: GENERAL FUND CARD

**Position**: Below header, horizontally centered
**Margin**: Top 20px, bottom 16px
**Width**: 90% of viewport, max-width 600px
**Background**: White (#FFFFFF)
**Border**: None
**Border radius**: 12px
**Shadow**: Subtle elevation (0 2px 8px rgba(0,0,0,0.1))
**Padding**: 24px

**Content Layout (Vertical stack, center-aligned):**

```
Row 1: Label
  - Text: "ğŸ’° Saldo Dompet Bersama"
  - Font: Medium, 14px
  - Color: Gray (#6B7280)
  - Margin bottom: 8px

Row 2: Amount
  - Text: "Rp [formatted_balance]"
  - Font: Extra bold, 32px
  - Color: Teal (#14b8a6)
  - Format: Indonesian rupiah (e.g., "Rp 120.000")
  - Margin bottom: 8px

Row 3: Description
  - Text: "Dana tidak teralokasi â€¢ Tersedia untuk kebutuhan komunitas"
  - Font: Regular, 13px
  - Color: Light gray (#9CA3AF)
  - Margin bottom: 12px

Row 4 (Conditional - only if balance > 0):
  - Info box container:
    * Background: Light blue (#EFF6FF)
    * Border: 1px solid blue (#BFDBFE)
    * Border radius: 8px
    * Padding: 12px
    * Icon: "â„¹ï¸" (16px)
    * Text: "Dana ini akan otomatis masuk ke target wisuda berikutnya yang aktif"
    * Font: Regular, 12px
    * Color: Dark blue (#1E40AF)
```

---

### COMPONENT 3: ACTIVE TARGET CARD (PRIMARY FOCUS)

**Position**: Below General Fund card, horizontally centered
**Margin**: Top 24px, bottom 24px
**Width**: 90% of viewport, max-width 800px
**Background**: White (#FFFFFF)
**Border**: 2px solid teal (#14b8a6) â† Prominent border
**Border radius**: 16px
**Shadow**: Elevated (0 4px 16px rgba(0,0,0,0.15))
**Padding**: 32px

**Content Layout (Vertical stack):**

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ROW 1: HEADER (Horizontal flexbox, space-between)

  Left side:
    - Text: "ğŸ¯ TARGET SOKONGAN DANA WISUDA"
    - Font: Bold, 18px
    - Color: Dark gray (#111827)
  
  Right side - Status badge (conditional based on state):
    
    IF status == "active" AND days_until_deadline > 7:
      - Background: Light green (#D1FAE5)
      - Border: 1px solid green (#10B981)
      - Text: "ğŸŸ¢ Aktif"
      - Color: Dark green (#065F46)
    
    IF status == "closing_soon" (H-7 to H-3):
      - Background: Light orange (#FEF3C7)
      - Border: 1px solid orange (#F59E0B)
      - Text: "âš ï¸ Deadline [X] hari lagi"
      - Color: Dark orange (#92400E)
      - Font: Semi-bold (emphasis)

  Margin bottom: 16px

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ROW 2: TARGET INFO (Horizontal)

  - Icon + Text: "ğŸ“… [MONTH YEAR]"
    * Font: Bold, 20px
    * Color: Dark gray (#111827)
    * Example: "ğŸ“… MEI 2026"
  
  - Separator: " â€¢ "
  
  - Text: "[N] Wisudawan"
    * Font: Regular, 16px
    * Color: Medium gray (#6B7280)
    * Example: "3 Wisudawan"
  
  Margin bottom: 12px

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ROW 3: DEADLINE INFO

  Primary line:
    - Text: "â° Deadline: [DD MMM YYYY] (H-3 dari wisuda pertama)"
    - Font: Regular, 14px
    - Color: Medium gray (#6B7280)
    - Example: "â° Deadline: 28 April 2026 (H-3 dari wisuda pertama)"
  
  Secondary line (if closing_soon):
    - Text: "âš ï¸ [X] hari lagi!"
    - Font: Bold, 14px
    - Color: Red/Orange (#DC2626 or #F59E0B)
    - Margin top: 4px
  
  Margin bottom: 20px

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ROW 4: PROGRESS SECTION

  Label:
    - Text: "Dana Terkumpul"
    - Font: Medium, 14px
    - Color: Gray (#6B7280)
    - Margin bottom: 8px
  
  Amount display:
    - Text: "Rp [current] / Rp [target] ([percentage]%)"
    - Font: Bold, 24px
    - Color: Teal (#14b8a6)
    - Format example: "Rp 520.000 / Rp 750.000 (69%)"
    - Margin bottom: 12px
  
  Progress bar container:
    - Width: 100%
    - Height: 24px
    - Background: Light gray (#F3F4F6)
    - Border radius: 12px
    - Overflow: Hidden
    
    Progress bar fill (animated):
      - Width: [percentage]% (animate transition 500ms)
      - Height: 24px
      - Border radius: 12px
      - Gradient based on percentage:
        
        IF percentage < 25:
          colors: [#D1D5DB, #9CA3AF] (gray gradient)
        
        ELSE IF percentage < 50:
          colors: [#FCD34D, #F59E0B] (yellow/amber gradient) ğŸ¥‰
        
        ELSE IF percentage < 75:
          colors: [#FB923C, #EA580C] (orange gradient) ğŸ¥ˆ
        
        ELSE IF percentage < 100:
          colors: [#4ADE80, #16A34A] (green gradient) ğŸ¥‡
        
        ELSE (>= 100):
          colors: [#14b8a6, #0891B2] (teal/blue gradient) ğŸŠ
    
    Margin bottom: 12px
  
  Achievement badge (based on percentage):
    - Container: Inline badge
    - Background: Matching color to progress bar
    - Border radius: 16px
    - Padding: 6px 12px
    - Font: Semi-bold, 14px
    
    Text based on milestone:
      IF percentage >= 25 AND percentage < 50:
        "ğŸ¥‰ Seperempat jalan!"
      
      ELSE IF percentage >= 50 AND percentage < 75:
        "ğŸ¥ˆ Setengah perjalanan!"
      
      ELSE IF percentage >= 75 AND percentage < 100:
        "ğŸ¥‡ Almost there!"
      
      ELSE IF percentage >= 100:
        "ğŸŠ TARGET TERCAPAI!" 
        + Trigger confetti animation (see implementation notes)
  
  Margin bottom: 16px

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ROW 5: CONTRIBUTOR STATS

  - Icon + Text: "â¤ï¸ [N] kontribusi tercatat"
    * Font: Regular, 14px
    * Color: Medium gray (#6B7280)
    * Example: "â¤ï¸ 18 kontribusi tercatat"
  
  - Sub-text: "(Dana dari [N] transaksi)"
    * Font: Regular, 12px
    * Color: Light gray (#9CA3AF)
    * Margin top: 4px
  
  Margin bottom: 20px

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ROW 6: GRADUATE DETAILS (Expandable Section)

  Header (clickable):
    - Text: "ğŸ“‹ Detail Wisudawan"
    - Font: Medium, 14px
    - Color: Teal (#14b8a6)
    - Icon: Chevron down/up (toggle state)
    - Cursor: Pointer
    - Hover: Underline
  
  Content (when expanded):
    - Container:
      * Margin top: 12px
      * Padding: 16px
      * Background: Light gray (#F9FAFB)
      * Border radius: 8px
    
    - Graduate list (vertical stack, gap 8px):
      Each item format:
        "â€¢ [Full Name] - [DD MMM YYYY] - [Location]"
        
        Example:
          "â€¢ Faris Ramadhan - 1 Mei 2026 - Universitas Indonesia, Depok"
          "â€¢ Daffa Ramadhan - 8 Mei 2026 - Universitas Trisakti, Jakarta"
          "â€¢ Gasin Muhammad - 21 Mei 2026 - IPB University, Bogor"
        
        Font: Regular, 14px
        Color: Dark gray (#374151)
  
  Default state: Collapsed (show only header)
  
  Margin bottom: 24px

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ROW 7: ACTION BUTTONS (Horizontal flexbox, center, gap 12px)

  Primary button: DONASI
    - Text: "ğŸ’¸ DONASI SEKARANG"
    - Width: Auto (fit content, min 180px)
    - Height: 48px
    - Background: Teal (#14b8a6)
    - Color: White
    - Font: Bold, 16px
    - Border: None
    - Border radius: 24px (fully rounded)
    - Shadow: 0 2px 8px rgba(20, 184, 166, 0.3)
    - Hover: Darken background (#0d9488)
    - Active: Scale down 0.98
    - Click: Open donation popup modal
  
  Secondary button: DETAIL
    - Text: "â„¹ï¸ Detail Target"
    - Width: Auto (fit content, min 140px)
    - Height: 48px
    - Background: Transparent
    - Color: Gray (#6B7280)
    - Font: Medium, 14px
    - Border: 1px solid gray (#D1D5DB)
    - Border radius: 24px
    - Hover: Border color teal, text color teal
    - Click: Expand graduate details section (scroll to it)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

### COMPONENT 4: UPCOMING TARGET SECTION

**Condition**: Only display if upcoming target exists
**Position**: Below Active Target card
**Margin**: Top 16px, bottom 16px
**Width**: 90% of viewport, max-width 800px
**Background**: Light gray (#F9FAFB)
**Border**: 1px dashed gray (#D1D5DB)
**Border radius**: 12px
**Padding**: 20px

**Content Layout (Vertical stack):**

```
Row 1: Section label
  - Text: "ğŸ”’ TARGET MENDATANG"
  - Font: Semi-bold, 14px
  - Color: Gray (#6B7280)
  - Margin bottom: 8px

Row 2: Month info
  - Text: "ğŸ“… [MONTH YEAR] â€¢ [N] Wisudawan"
  - Font: Bold, 16px
  - Color: Dark gray (#374151)
  - Example: "ğŸ“… JUNI 2026 â€¢ 2 Wisudawan"
  - Margin bottom: 8px

Row 3: Open timing info
  - Text: "ğŸ”“ Akan dibuka: Setelah deadline target aktif ditutup"
  - Font: Regular, 13px
  - Color: Medium gray (#6B7280)
  - Margin bottom: 8px

Row 4: Target amount
  - Text: "Target: Rp [formatted_amount]"
  - Font: Medium, 14px
  - Color: Teal (#14b8a6)
  - Example: "Target: Rp 500.000"
```

---

### COMPONENT 5: INCOME HISTORY SECTION

**Position**: Below target cards
**Margin**: Top 32px, bottom 24px
**Width**: 90% of viewport, max-width 800px
**Background**: None (transparent)
**Padding**: 0

**Content Layout:**

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

HEADER:
  - Main text: "ğŸ’š RIWAYAT PEMASUKKAN"
    * Font: Bold, 18px
    * Color: Dark gray (#111827)
    * Margin bottom: 4px
  
  - Sub-text: "Menampilkan 10 transaksi terbaru"
    * Font: Regular, 13px
    * Color: Light gray (#9CA3AF)
    * Margin bottom: 16px

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TRANSACTION LIST:
  Container:
    - Vertical stack
    - Gap between items: 8px
  
  Each transaction item card:
    - Width: 100%
    - Background: White (#FFFFFF)
    - Border: 1px solid light gray (#E5E7EB)
    - Border radius: 8px
    - Padding: 16px
    - Hover: Shadow 0 2px 8px rgba(0,0,0,0.08)
    
    Layout (Horizontal flexbox, space-between):
      
      Left section (70% width):
        Row 1:
          - Text: "â†“ Rp [formatted_amount]"
          - Font: Bold, 16px
          - Color: Green (#16A34A)
          - Format: "â†“ Rp 50.000"
        
        Row 2:
          - Text: "[relative_time]"
          - Font: Regular, 13px
          - Color: Gray (#6B7280)
          - Examples: "2 jam lalu", "1 hari lalu", "3 hari lalu"
          - Margin top: 4px
        
        Row 3:
          - Text: "Target: [Month Year]" OR "Dompet Bersama"
          - Font: Regular, 12px
          - Color: Teal (#14b8a6)
          - Examples: "Target: Mei 2026" or "Dompet Bersama"
          - Margin top: 4px
      
      Right section (30% width, right-aligned):
        - Text: "[DD/MM HH:MM]"
        - Font: Regular, 12px
        - Color: Light gray (#9CA3AF)
        - Example: "04/01 14:30"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FOOTER:
  - Button: "Lihat Semua"
    * Type: Text button (no background)
    * Font: Medium, 14px
    * Color: Teal (#14b8a6)
    * Hover: Underline
    * Click: Expand to show all transactions (or navigate to dedicated page)
    * Margin top: 12px
    * Align: Center
```

---

### COMPONENT 6: EXPENSE HISTORY SECTION

**Position**: Below Income History
**Margin**: Top 40px, bottom 24px
**Width**: 90% of viewport, max-width 800px
**Background**: None (transparent)
**Padding**: 0

**Content Layout:**

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

HEADER:
  - Main text: "ğŸ“¤ PENGELUARAN DOMPET"
    * Font: Bold, 18px
    * Color: Dark gray (#111827)
    * Margin bottom: 4px
  
  - Sub-text: "Transparansi penggunaan dana"
    * Font: Regular, 13px
    * Color: Light gray (#9CA3AF)
    * Margin bottom: 16px

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TRANSACTION LIST:
  Container: Similar to Income History
  
  Each expense item card:
    - Width: 100%
    - Background: White (#FFFFFF)
    - Border: 1px solid light gray (#E5E7EB)
    - Border radius: 8px
    - Padding: 16px
    - Hover: Shadow 0 2px 8px rgba(0,0,0,0.08)
    
    Layout (Horizontal flexbox, space-between):
      
      Left section (60% width):
        Row 1:
          - Text: "â†‘ Rp [formatted_amount]"
          - Font: Bold, 16px
          - Color: Red (#DC2626)
          - Format: "â†‘ Rp 150.000"
        
        Row 2:
          - Text: "[relative_time]"
          - Font: Regular, 13px
          - Color: Gray (#6B7280)
          - Margin top: 4px
        
        Row 3:
          - Icon + Text: "[category_icon] [description]"
          - Font: Regular, 13px
          - Color: Dark gray (#374151)
          - Examples:
            * "ğŸ“ Bunga wisuda - Faris"
            * "ğŸ• Gathering komunitas"
            * "ğŸ“¸ Dokumentasi wisuda Mei"
          - Margin top: 4px
      
      Right section (40% width, right-aligned):
        Row 1:
          - Text: "[DD/MM HH:MM]"
          - Font: Regular, 12px
          - Color: Light gray (#9CA3AF)
        
        Row 2:
          - Button: "ğŸ“· Lihat Bukti"
            * Width: Auto
            * Height: 28px
            * Background: Transparent
            * Border: 1px solid gray (#D1D5DB)
            * Border radius: 6px
            * Font: Regular, 12px
            * Color: Gray (#6B7280)
            * Padding: 4px 12px
            * Hover: Border teal, text teal
            * Click: Open modal with proof image
          - Margin top: 8px

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FOOTER:
  - Button: "Lihat Semua Pengeluaran"
    * Type: Text button
    * Font: Medium, 14px
    * Color: Teal (#14b8a6)
    * Hover: Underline
    * Align: Center
    * Margin top: 12px
```

---

### COMPONENT 7: FOOTER

**Position**: Bottom of page
**Margin**: Top 60px, bottom 0
**Width**: 100% (full width)
**Background**: Dark gray (#1F2937)
**Padding**: 40px 20px
**Text color**: White (#FFFFFF)

**Content Layout (Vertical stack, center-aligned):**

```
Row 1:
  - Text: "Made with â¤ï¸ for Alumni Community"
  - Font: Regular, 14px
  - Margin bottom: 8px

Row 2:
  - Text: "Â© 2026 Dompet Alumni Comm"
  - Font: Regular, 13px
  - Margin bottom: 12px

Row 3 (if contact info available):
  - Text: "ğŸ“§ [Email] | ğŸ“± [Phone]"
  - Font: Regular, 12px
  - Color: Light gray (#D1D5DB)
  - Links: Clickable, hover underline
```

---

## DONATION POPUP MODAL SPECIFICATION

### Modal Overlay & Container

**Trigger**: Click "ğŸ’¸ DONASI SEKARANG" button

**Overlay:**
- Position: Fixed, full viewport
- Background: Black with 60% opacity (rgba(0, 0, 0, 0.6))
- Z-index: 2000
- Click: Close modal (click outside content area)

**Modal Container:**
- Desktop: Centered, 90% width, max-width 500px
- Mobile: Full screen (100% width & height)
- Background: White
- Border radius: 16px (desktop only)
- Shadow: 0 8px 32px rgba(0,0,0,0.2)
- Animation: Slide up from bottom (mobile) or fade in (desktop)

---

### Modal Content Structure

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ HEADER                                             â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                    â•‘
â•‘ BODY (Scrollable)                                  â•‘
â•‘   - Section 1: Target Info Summary                 â•‘
â•‘   - Section 2: Bank Transfer Info                  â•‘
â•‘   - Section 3: QR Code                             â•‘
â•‘   - Section 4: Proof Upload                        â•‘
â•‘   - Section 5: WhatsApp Alternative                â•‘
â•‘                                                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ FOOTER (Action Buttons)                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

### HEADER SECTION

**Background**: Teal gradient (#14b8a6 to #0d9488)
**Height**: 64px
**Padding**: 20px

**Content (Horizontal flexbox, space-between):**

```
Left side:
  - Icon + Text: "ğŸ’¸ DONASI UNTUK TARGET [MONTH YEAR]"
  - Font: Bold, 18px
  - Color: White
  - Example: "ğŸ’¸ DONASI UNTUK TARGET MEI 2026"

Right side:
  - Close button: "âœ–ï¸"
  - Size: 32px Ã— 32px
  - Color: White
  - Background: Transparent
  - Hover: Background rgba(255,255,255,0.2)
  - Click: Close modal
```

---

### BODY SECTION (Scrollable)

**Padding**: 24px
**Max height**: calc(100vh - 200px) (desktop), calc(100vh - 128px) (mobile)
**Overflow**: Auto scroll

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SECTION 1: TARGET INFO SUMMARY

  Container:
    - Background: Light blue (#EFF6FF)
    - Border: 1px solid blue (#BFDBFE)
    - Border radius: 8px
    - Padding: 16px
    - Margin bottom: 20px
  
  Content (Vertical stack, gap 6px):
    Line 1:
      - Text: "Target: [Month Year] ([N] Wisudawan)"
      - Font: Semi-bold, 14px
      - Color: Dark blue (#1E40AF)
      - Example: "Target: Mei 2026 (3 Wisudawan)"
    
    Line 2 (if target not yet fully funded):
      - Text: "Status: âš ï¸ Butuh Rp [shortfall] lagi"
      - Font: Regular, 13px
      - Color: Orange (#EA580C)
      - Example: "Status: âš ï¸ Butuh Rp 230.000 lagi"
    
    Line 3:
      - Text: "Deadline: [DD MMM YYYY] ([X] hari lagi)"
      - Font: Regular, 13px
      - Color: Dark blue (#1E40AF)
      - Example: "Deadline: 28 April 2026 (5 hari lagi)"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SECTION 2: BANK TRANSFER INFO

  Container:
    - Background: White
    - Border: 1px dashed gray (#D1D5DB)
    - Border radius: 8px
    - Padding: 20px
    - Margin bottom: 20px
  
  Content (Vertical stack):
    Header:
      - Text: "ğŸ“± TRANSFER KE REKENING"
      - Font: Bold, 15px
      - Color: Dark gray (#111827)
      - Margin bottom: 12px
    
    Divider:
      - Line: 1px solid light gray (#E5E7EB)
      - Margin bottom: 12px
    
    Bank info (each row, gap 8px):
      Row format: "[Label]: [Value]"
      
      - "Bank: [bank_name]"
        Example: "Bank: BCA"
      
      - "No. Rekening: [account_number]"
        Example: "No. Rekening: 1234567890"
      
      - "Atas Nama: [account_name]"
        Example: "Atas Nama: Adrian Marcell"
      
      Font: Regular, 14px
      Color: Dark gray (#374151)
      Margin bottom row: 6px
    
    Copy button:
      - Text: "ğŸ“‹ Salin Nomor Rekening"
      - Width: 100%
      - Height: 40px
      - Background: Transparent
      - Border: 1px solid teal (#14b8a6)
      - Border radius: 8px
      - Font: Medium, 14px
      - Color: Teal (#14b8a6)
      - Margin top: 16px
      - Click: Copy account number to clipboard
      - Success feedback: Change text to "âœ… Tersalin!" for 2 seconds

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SECTION 3: QR CODE

  Container:
    - Background: White
    - Border: 1px solid light gray (#E5E7EB)
    - Border radius: 8px
    - Padding: 20px
    - Margin bottom: 20px
  
  Content (Vertical stack, center-aligned):
    Header:
      - Text: "ATAU SCAN QR CODE"
      - Font: Bold, 14px
      - Color: Dark gray (#111827)
      - Margin bottom: 16px
    
    QR code image:
      - Size: 200px Ã— 200px
      - Border: 2px solid light gray (#E5E7EB)
      - Border radius: 8px
      - Padding: 8px
      - Margin bottom: 12px
    
    Caption:
      - Text: "Scan untuk transfer via QRIS"
      - Font: Regular, 13px
      - Color: Gray (#6B7280)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SECTION 4: PROOF UPLOAD

  Container:
    - Background: Light yellow (#FEF3C7)
    - Border: 1px solid yellow (#FDE047)
    - Border radius: 8px
    - Padding: 20px
    - Margin bottom: 16px
  
  Content (Vertical stack):
    Header:
      - Text: "ğŸ“¸ UPLOAD BUKTI TRANSFER"
      - Font: Bold, 14px
      - Color: Dark gray (#111827)
      - Margin bottom: 12px
    
    File upload area:
      - Container:
        * Width: 100%
        * Height: 120px
        * Background: White
        * Border: 2px dashed gray (#D1D5DB)
        * Border radius: 8px
        * Cursor: Pointer
        * Hover: Border color teal
      
      - Content (center-aligned):
        * Icon: "ğŸ“" (32px)
        * Text: "Klik atau seret file ke sini"
        * Sub-text: "Max 5MB â€¢ JPG, PNG"
        * Font: Regular, 13px
        * Color: Gray (#6B7280)
      
      - Accepted formats: .jpg, .jpeg, .png
      - Max size: 5MB
      - Single file only
    
    Preview area (if file selected):
      - Margin top: 12px
      - Container:
        * Background: White
        * Border: 1px solid gray (#E5E7EB)
        * Border radius: 8px
        * Padding: 12px
      
      - Layout (Horizontal):
        * Thumbnail: 60px Ã— 60px (left)
        * File info (center):
          - File name (truncated if long)
          - File size
          - Font: 12px, Gray
        * Remove button (right):
          - Icon: "âŒ"
          - Click: Clear file selection
    
    Warning text:
      - Text: "âš ï¸ Mohon upload screenshot/foto bukti transfer agar admin dapat memvalidasi"
      - Font: Regular, 12px
      - Color: Orange (#EA580C)
      - Margin top: 12px

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SECTION 5: WHATSAPP ALTERNATIVE

  Container:
    - Background: Light green (#DCFCE7)
    - Border: 1px solid green (#86EFAC)
    - Border radius: 8px
    - Padding: 16px
  
  Content (Vertical stack, center-aligned):
    Icon:
      - Icon: "ğŸ’¬" (24px)
      - Margin bottom: 8px
    
    Title:
      - Text: "ATAU KONFIRMASI VIA WHATSAPP"
      - Font: Bold, 14px
      - Color: Dark green (#065F46)
      - Margin bottom: 6px
    
    Description:
      - Text: "Klik untuk kirim bukti transfer langsung ke WhatsApp admin"
      - Font: Regular, 12px
      - Color: Medium green (#16A34A)
      - Margin bottom: 12px
    
    WhatsApp button:
      - Text: "ğŸ’¬ Hubungi Admin via WA"
      - Width: 100%
      - Height: 44px
      - Background: WhatsApp green (#25D366)
      - Color: White
      - Font: Bold, 15px
      - Border: None
      - Border radius: 8px
      - Click: Open WhatsApp with pre-filled message
    
    Link format:
      https://wa.me/[ADMIN_PHONE]?text=[URL_ENCODED_MESSAGE]
    
    Pre-filled message template:
      "Halo Admin! ğŸ“
      
      Saya baru saja transfer untuk Target Wisuda [Month Year]:
      
      ğŸ’° Nominal: Rp _____
      ğŸ“… Tanggal Transfer: [Today's Date]
      ğŸ¦ Dari Bank: _____
      
      Mohon divalidasi ya! Terima kasih ğŸ˜Š"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

### FOOTER SECTION (Action Buttons)

**Background**: White (same as body)
**Border top**: 1px solid light gray (#E5E7EB)
**Padding**: 20px
**Height**: 64px

**Content (Horizontal flexbox, space-between):**

```
Left button:
  - Text: "âŒ Batal"
  - Width: 45%
  - Height: 44px
  - Background: Transparent
  - Border: 1px solid gray (#D1D5DB)
  - Border radius: 8px
  - Font: Medium, 14px
  - Color: Gray (#6B7280)
  - Click: Close modal

Right button:
  - Text: "âœ… Submit Bukti"
  - Width: 45%
  - Height: 44px
  - Background: Teal (#14b8a6)
  - Color: White
  - Font: Bold, 14px
  - Border: None
  - Border radius: 8px
  
  States:
    Disabled (if no file uploaded):
      - Background: Light gray (#E5E7EB)
      - Color: Gray (#9CA3AF)
      - Cursor: Not allowed
    
    Enabled:
      - Cursor: Pointer
      - Hover: Darken background (#0d9488)
      - Click:
        * Upload file to Firebase Storage (/pending_submissions)
        * Create document in /pending_submissions collection
        * Show success message
        * Close modal after 1.5 seconds
  
  Success message (toast notification):
    - Position: Top center of viewport
    - Background: Green (#16A34A)
    - Color: White
    - Text: "âœ… Bukti berhasil dikirim! Admin akan memvalidasi segera."
    - Font: Medium, 14px
    - Padding: 12px 24px
    - Border radius: 8px
    - Animation: Fade in, stay 3 seconds, fade out
```

---

## RESPONSIVE DESIGN BREAKPOINTS

```dart
// Define breakpoints
const double mobileBreakpoint = 600;
const double tabletBreakpoint = 1024;

// Usage in LayoutBuilder
Widget build(BuildContext context) {
  return LayoutBuilder(
    builder: (context, constraints) {
      if (constraints.maxWidth < mobileBreakpoint) {
        // MOBILE LAYOUT
        return MobileLayout(
          // Single column
          // Full width cards (100%)
          // Smaller font sizes
          // Stack buttons vertically
          // Full-screen modal
        );
      } else if (constraints.maxWidth < tabletBreakpoint) {
        // TABLET LAYOUT
        return TabletLayout(
          // Adjusted padding (left/right 32px)
          // Card max-width: 700px
          // Medium font sizes
          // Horizontal buttons OK
          // Centered modal (80% width)
        );
      } else {
        // DESKTOP LAYOUT
        return DesktopLayout(
          // Max-width containers (600-800px)
          // Larger spacing/margins
          // Full font sizes
          // Centered modal (500px max-width)
        );
      }
    },
  );
}
```

**Mobile-specific adjustments:**
- Header height: 56px (instead of 60px)
- Card padding: 16px (instead of 24-32px)
- Font sizes: Reduce by 2px across the board
- Button height: 40px (instead of 44-48px)
- Modal: Full-screen overlay (no border radius)
- Graduate list: Stack names vertically with date below

**Tablet-specific adjustments:**
- Card padding: 20px (middle ground)
- Maintain desktop font sizes
- Modal: 80% width, max 600px

---

## FIREBASE SECURITY RULES

```javascript
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // Helper function: Check if authenticated user is admin
    function isAdmin() {
      return request.auth != null && 
             request.auth.token.email == 'admin@example.com';
      // TODO: Replace 'admin@example.com' with actual admin email
    }
    
    // Graduation Targets
    // Public: Can read all targets
    // Admin only: Can create, update, delete
    match /graduation_targets/{targetId} {
      allow read: if true;
      allow create, update, delete: if isAdmin();
    }
    
    // Transactions
    // Public: Can read all transactions
    // Admin only: Can create, update, delete
    match /transactions/{transactionId} {
      allow read: if true;
      allow create, update, delete: if isAdmin();
    }
    
    // General Fund
    // Public: Can read balance and stats
    // Admin only: Can update balance
    match /general_fund/{document=**} {
      allow read: if true;
      allow write: if isAdmin();
    }
    
    // Settings (Payment info, system config)
    // Public: Can read (for payment info display)
    // Admin only: Can update
    match /settings/{settingId} {
      allow read: if true;
      allow write: if isAdmin();
    }
    
    // Pending Submissions (Proof uploads)
    // Anyone: Can create (upload proof)
    // Admin only: Can read, update, delete
    match /pending_submissions/{submissionId} {
      allow create: if true;
      allow read, update, delete: if isAdmin();
    }
  }
}
```

---

## FIREBASE STORAGE RULES

```javascript
rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    
    // Proof images folder
    // Anyone: Can upload (with size & type restrictions)
    // Anyone: Can read (public URLs)
    // Admin only: Can delete
    match /proof_images/{imageId} {
      allow read: if true;
      
      allow create: if request.resource.size < 5 * 1024 * 1024  // Max 5MB
                    && request.resource.contentType.matches('image/.*');  // Images only
      
      allow delete: if request.auth != null && 
                    request.auth.token.email == 'admin@example.com';
    }
    
    // QR codes folder
    // Anyone: Can read
    // Admin only: Can write
    match /qr_codes/{qrId} {
      allow read: if true;
      allow write: if request.auth != null && 
                    request.auth.token.email == 'admin@example.com';
    }
  }
}
```

---

## ERROR HANDLING & EDGE CASES

### 1. No Active Target Exists

**Scenario**: All targets are either upcoming, closed, or archived

**Display**:
```
- Show General Fund card (normal)
- Replace Active Target card with info card:
  * Background: Light blue (#EFF6FF)
  * Icon: "ğŸ’¡"
  * Title: "Tidak ada target wisuda yang aktif saat ini"
  * Message: "Target wisuda berikutnya akan dibuka setelah deadline target sebelumnya atau dibuat oleh admin"
  * If upcoming exists: Show upcoming target preview
- Income/Expense history: Show normally
- Donation button: Disabled with tooltip "Target belum dibuka"
```

### 2. Target Reaches 100% Before Deadline

**Scenario**: Target fully funded with days remaining until deadline

**Behavior**:
- Continue accepting contributions (excess goes to General Fund when closed)
- Display: "âœ… TARGET TERCAPAI! - Masih menerima kontribusi hingga [deadline]"
- Progress bar: Show 100%+ overflow (visual: extending beyond bar)
- Confetti animation: Trigger once when first reaching 100%

### 3. File Upload Errors

**Error: File too large (>5MB)**
```
Display: Toast notification (red)
Message: "âŒ Ukuran file terlalu besar (Max: 5MB)"
Suggestion: "Kompres gambar atau ambil screenshot dengan resolusi lebih rendah"
Duration: 4 seconds
```

**Error: Wrong file type**
```
Message: "âŒ Format file tidak didukung"
Suggestion: "Upload file JPG atau PNG"
```

**Error: Upload failed (network)**
```
Message: "âŒ Upload gagal. Periksa koneksi internet Anda"
Action: Retry button
```

### 4. Empty States

**No income transactions yet:**
```
Display in income section:
  - Icon: "ğŸ“­"
  - Text: "Belum ada pemasukkan"
  - Sub-text: "Mulai donasi sekarang untuk mendukung teman wisuda!"
```

**No expense transactions yet:**
```
Display in expense section:
  - Icon: "ğŸ’°"
  - Text: "Belum ada pengeluaran"
  - Sub-text: "Dana tersimpan aman di dompet bersama"
```

### 5. Loading States

**Initial page load:**
- Show skeleton loaders matching component layouts
- Shimmer effect on cards
- Duration: Until Firestore data loads

**Real-time updates:**
- Smooth transitions (fade in/out)
- No skeleton, just update values
- Progress bar: Animated width change (500ms)

---

## IMPLEMENTATION REQUIREMENTS

### Flutter Packages Required

```yaml
dependencies:
  flutter:
    sdk: flutter
  
  # Firebase
  firebase_core: ^2.24.0
  cloud_firestore: ^4.13.0
  firebase_storage: ^11.5.0
  firebase_auth: ^4.15.0
  
  # State Management
  flutter_riverpod: ^2.4.9
  
  # UI
  google_fonts: ^6.1.0
  
  # Utilities
  intl: ^0.18.1              # Date/number formatting
  url_launcher: ^6.2.2       # WhatsApp link
  file_picker: ^6.1.1        # File upload
  cached_network_image: ^3.3.0  # Image caching
  
  # Animations
  confetti: ^0.7.0           # Confetti effect
```

### State Management Structure (Riverpod)

```dart
// Providers

// Settings provider (payment info, system config)
final settingsProvider = StreamProvider<AppSettings>((ref) {
  return FirebaseFirestore.instance
    .collection('settings')
    .doc('app_config')
    .snapshots()
    .map((doc) => AppSettings.fromFirestore(doc));
});

// Active target provider
final activeTargetProvider = StreamProvider<GraduationTarget?>((ref) {
  return FirebaseFirestore.instance
    .collection('graduation_targets')
    .where('status', whereIn: ['active', 'closing_soon'])
    .limit(1)
    .snapshots()
    .map((snapshot) => snapshot.docs.isEmpty 
      ? null 
      : GraduationTarget.fromFirestore(snapshot.docs.first)
    );
});

// Upcoming target provider
final upcomingTargetProvider = StreamProvider<GraduationTarget?>((ref) {
  return FirebaseFirestore.instance
    .collection('graduation_targets')
    .where('status', isEqualTo: 'upcoming')
    .orderBy('deadline', descending: false)
    .limit(1)
    .snapshots()
    .map((snapshot) => snapshot.docs.isEmpty 
      ? null 
      : GraduationTarget.fromFirestore(snapshot.docs.first)
    );
});

// General fund provider
final generalFundProvider = StreamProvider<GeneralFund>((ref) {
  return FirebaseFirestore.instance
    .collection('general_fund')
    .doc('current')
    .snapshots()
    .map((doc) => GeneralFund.fromFirestore(doc));
});

// Recent income transactions (10 latest)
final recentIncomeProvider = StreamProvider<List<Transaction>>((ref) {
  return FirebaseFirestore.instance
    .collection('transactions')
    .where('type', isEqualTo: 'income')
    .orderBy('created_at', descending: true)
    .limit(10)
    .snapshots()
    .map((snapshot) => snapshot.docs
      .map((doc) => Transaction.fromFirestore(doc))
      .toList()
    );
});

// Recent expense transactions (10 latest)
final recentExpenseProvider = StreamProvider<List<Transaction>>((ref) {
  return FirebaseFirestore.instance
    .collection('transactions')
    .where('type', isEqualTo: 'expense')
    .orderBy('created_at', descending: true)
    .limit(10)
    .snapshots()
    .map((snapshot) => snapshot.docs
      .map((doc) => Transaction.fromFirestore(doc))
      .toList()
    );
});
```

### Data Models

```dart
// Models

class GraduationTarget {
  final String id;
  final String month;
  final int year;
  final List<Graduate> graduates;
  final double targetAmount;
  final double currentAmount;
  final DateTime deadline;
  final String status;
  final DateTime? openDate;
  final DateTime? closedDate;
  final Distribution distribution;
  final DateTime createdAt;
  
  // Constructor, fromFirestore, toFirestore methods
  
  double get percentage => (currentAmount / targetAmount * 100).clamp(0, 999);
  int get daysUntilDeadline => deadline.difference(DateTime.now()).inDays;
  bool get isClosingSoon => daysUntilDeadline <= 7 && status == 'active';
}

class Graduate {
  final String name;
  final DateTime date;
  final String location;
  
  // Constructor, fromMap, toMap methods
}

class Distribution {
  final double perPerson;
  final double totalDistributed;
  final String status;
  final DateTime? distributedAt;
  
  // Constructor, fromMap, toMap methods
}

class Transaction {
  final String id;
  final String type;  // "income" | "expense"
  final double amount;
  final String? targetId;
  final String? targetMonth;
  final String? category;
  final String description;
  final String? proofUrl;
  final bool validated;
  final DateTime createdAt;
  final DateTime inputAt;
  final String createdBy;
  
  // Constructor, fromFirestore, toFirestore methods
  
  String get relativeTime {
    final diff = DateTime.now().difference(createdAt);
    if (diff.inMinutes < 60) return '${diff.inMinutes} menit lalu';
    if (diff.inHours < 24) return '${diff.inHours} jam lalu';
    return '${diff.inDays} hari lalu';
  }
}

class GeneralFund {
  final double balance;
  final DateTime lastUpdated;
  final String? lastTransactionId;
  final double totalIncome;
  final double totalExpense;
  final int transactionCount;
  
  // Constructor, fromFirestore, toFirestore methods
}

class AppSettings {
  final PaymentInfo paymentInfo;
  final SystemConfig systemConfig;
  final AdminConfig adminConfig;
  
  // Constructor, fromFirestore, toFirestore methods
}

class PaymentInfo {
  final String bankName;
  final String accountNumber;
  final String accountName;
  final String qrCodeUrl;
  
  // Constructor, fromMap, toMap methods
}
```

---

## DELIVERABLES FOR PHASE 1

**Please generate the following:**

1. **Complete Flutter project structure**
   - Main app setup with Firebase initialization
   - Folder structure: /lib/models, /lib/providers, /lib/screens, /lib/widgets, /lib/services
   
2. **Public dashboard screen** (`/lib/screens/public_dashboard.dart`)
   - Implement all components as specified above
   - Real-time Firestore listeners
   - Responsive layout for mobile/tablet/desktop
   
3. **Donation modal widget** (`/lib/widgets/donation_modal.dart`)
   - Complete modal UI
   - File upload functionality
   - WhatsApp link generation
   - Form validation
   
4. **Data models** (`/lib/models/`)
   - All model classes with Firestore serialization
   
5. **Riverpod providers** (`/lib/providers/`)
   - All StreamProviders as specified
   
6. **Firebase setup files**
   - `firestore.rules` with security rules
   - `storage.rules` with storage rules
   - `firebase.json` configuration
   
7. **README.md** with:
   - Firebase project setup instructions
   - How to run the app locally
   - Environment variables needed
   - Deployment steps to Firebase Hosting

---

## NOTES FOR IMPLEMENTATION

1. **Use Indonesian locale** for all date/number formatting
2. **Currency format**: "Rp 1.000.000" (Indonesian rupiah with thousand separators)
3. **Relative time**: In Indonesian ("2 jam lalu", "3 hari lalu")
4. **Error messages**: In Indonesian
5. **Comments in code**: In English for clarity
6. **Real-time updates**: Use Firestore snapshots, not polling
7. **Loading states**: Implement skeleton loaders matching component layouts
8. **Image optimization**: Compress uploads before sending to Storage
9. **Accessibility**: Ensure proper contrast ratios, touch targets min 44x44
10. **Performance**: Use `const` widgets where possible, avoid unnecessary rebuilds

---

## QUESTIONS TO ADDRESS

Before starting implementation, please confirm:

1. Admin email address for Firebase Auth and security rules
2. Actual bank account details for payment info
3. WhatsApp number for admin contact (with country code)
4. Preferred color scheme (if different from teal/green suggested)
5. Any specific Material Design 3 components to use or avoid

---

**END OF PROMPT 1**

This is Phase 1 only. After completion, we'll move to Prompt 2 (Admin Panel) and Prompt 3 (Cloud Functions & Automation).

Please implement Phase 1 with production-ready code, comprehensive error handling, and detailed comments for learning purposes.
```

---